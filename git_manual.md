# Git的学习与日常使用

## Git入门
第一次接触git的同学适合看国内的中文教程，当然英文好的话可以直接看官方的教程。

国内中文教程（廖雪峰的Git教程）：https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000

官方网站教程：https://git-scm.com/docs/gittutorial

## 关于入门Git的个人建议
很多新手程序员接触git大都是因为github，而老一辈的更倾向于从SVN转到Git。

所以就会产生一个误区，git必定是有一个公共的第三方网站来存项目代码，然后大家都往那儿传代码或者拿代码，整个思想就会趋向于SVN。

但实际上git的精髓在于它的分布式（非集中式）的特点。

而我们需要找一个切入点，先学会用，用上了再深入了解。

## 个人推荐的Git学习顺序
* 首先是将Git当成一个本地的版本管理工具，一个可以时光倒流的神奇工具。
* 然后再尝试学习`git remote`部分，同时尝试连接github、gitlab、gitee、coding。
* 最后尝试自己搭建git服务器，或直接通过Docker搭建属于自己的gitlab（内存要求比较大）。

## 前言
为什么学Git、Git有什么用、它是必须的吗、有替代品吗、如何安装……这些问题都可以在各种博客中的前言找到，没有必要重复其重要性了，既然写分享内容就写点有意义的。

## 第一步 - Git的本地使用
首先你可以想象平常经常编辑文本的时候会保存，或者编辑错误撤销，这就是一个简单的时光倒流。

然而有时候你会发现保存了就撤销不了了，想找回之前的版本，除非在此之前保存了多一份文件。

这个时候就有一个功能比较多的`撤销 / 恢复`了。

首先你得告诉这个工具你要对哪些文件提供这个功能，也就是让这个工具管理哪些文件。

一般git会管理某个文件夹下的文件（默认就是所有了），那么假设现在有个文件夹`project`，你就可以在这个目录下执行命令`$ git init`。（Windows和Linux或其他系统的git命令基本一致）

这个时候就有个`.git`的文件夹被建在`project`目录下了，记得**别动它**。（它就是时光机的具体实现）

这时候你就稍稍理解了为什么git可以在时间线上来回跳了。

然后就来到各种博客里所描述到的常见步骤：

```
$ cat hello > a.txt
$ git add .
$ git commit -m 'say something'
$ git status
$ cat world > b.txt
$ git add .
$ git commit -m 'say other things'
$ git reset --hard HEAD^
$ git log --graph
$ ...
```

你会首先了解到git中所提到的几个新的概念，工作区、暂存区、分支、指针、标签。当然，后几个可以入门后再了解。

具体命令做了会发生什么，这个需要你自己尝试，但是你必须搞懂的是，哪些指令是查询指令(git status/log/branch...)，哪些指令是修改指令(git add/commit/fetch/stash/remote add/rm/reset...)。操作完之后，什么变了，什么没变。否则你将不清楚你的命令将会影响到什么。

## 第二步 - Git的远程使用
领会了git的本地功能后，接下来就是跟github之间的操作了。

无论是github还是gitlab，说到底都只是一个git服务器，而现在你要知道的是，当存在这么一个服务器，你就可以与其他人协作开发了。

而git相较于svn，特别之处就在于，每个人的终端都是一个git服务器。所以其实在一个局域网内，假如只有两个人，A和B，那么它们俩也可以协作开发。

只是这时候A是你，B是github罢了。

那么你这时候可能会问，各种博客教程里为什么都说要什么

`$ ssh-keygen -t rsa -C "youremail@example.com"`

然后又要找公钥什么的。这是为啥？

首先呢，本来是不需要这个东西的，我就在两端之间传个代码嘛，这么麻烦干嘛。

但是问题是github或者说主流的第三方git服务器都是通过ssh协议（想象一下类似于HTTP/HTTPS/FTP等等）来连接的，而这个协议就需要这些东西。

至于为啥需要，这个你得去搞懂ssh的原理，估计还得了解下RSA，但这就跟Git没啥必然联系了。

无关的东西就不多说了，建个github账户，本地电脑生成公/私钥，github设置好ssh-key，本地项目利用`$ git remote add origin git@github.com:...`指令设置好相应的远程目标端即可。

接下来又是各种博客里的`git pull/push/fetch`了。其实就是在两端之间传递内容的操作。不赘述。

## 第三步 - Git的进阶学习
除了搭建属于自己的Git服务器之外，其实还有更重要的东西。

你了解了git可以做这些事，并且了解了该如何操作，这基本上在工作或者学习研究中是已经足够的了。

但是一个厉害一点的程序员，他会知道怎么才能将某些在版本管理内的已commit的信息消除，会知道什么时候该使用一些特殊的功能（比如rebase），会知道为什么git可以这么高效地处理大文件，会知道怎么找回已经删除的branch的文件内容等等。

这一切都需要知道git的原理是什么，它的实现思想是什么。

请看：https://git-scm.com/book/en/v2/Git-Internals-Plumbing-and-Porcelain

当然了，上面这个Pro Git第二版整本都是很好的进阶书本，可以一看。

另外git的官方文档在次：https://git-scm.com/docs

## 最后补充几句
其实我作为一个老生，在日常或者在公司里用git都比较多，其实也不必太纠结于要非常熟悉，不懂就查即可，常用的都熟能生巧了，不常用的查一下也不会耗太多时间。但原理是可以一直帮助你理解使用的。

感慨一下，有git的协作效率能提升很多。

顺便吐槽gitlab占2G内存我的服务器真的承受不来啊。